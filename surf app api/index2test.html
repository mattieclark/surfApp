<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>



    <script>


        // async function getResponse() {

        //     const request = await fetch(`https://api.stormglass.io/v2/weather/point?lat=${lat}&lng=${lng}&params=${params}`, {
        //         headers: {
        //             'Authorization': 'd8910aa4-f855-11ec-956e-0242ac130002-d8910b12-f855-11ec-956e-0242ac130002'
        //         }
        //     })

        //         .then((response) => response.json()).then((jsonData) => {

        //             console.log(jsonData);

        //             return (jsonData);

        //             // let Data = jsonData;

        //             // console.log(Data);

        //         });

        // };



        // getResponse();


        // var datetime = "Last Sync: " + currentdate.getDay() + "/" + currentdate.getMonth()
        //     + "/" + currentdate.getFullYear() + " @ "
        //     + currentdate.getHours() + ":"
        //     + currentdate.getMinutes() + ":" + currentdate.getSeconds();


        // let sum = 0;

        // for (let i = 0; i < i.length; i++) {
        //     sum = sum + value[i];
        // }

        // console.log(sum);


        ////////////////////////////////////////////////////////////////////////////////////////////////
        // WORKING GET AVERAGE FUNCTION FROM DUMMY OBJ (TESTING);

        // swellPeriodNow = { dwd: 8.64, icon: 6.88, meteo: 5.71, meto: 5.08, noaa: 12.72, sg: 5.08 }

        // function getAverage(obj) {

        //     let values = Object.values(obj);
        //     console.log(values);

        //     let sum = 0;

        //     for (let i = 0; i < values.length; i++) {
        //         sum = sum + values[i];
        //         } console.log(sum);    

        //         const result = sum / values.length;

        //         console.log(result);

        //         newAverage = document.createElement("p");
        //         newAverage.innerHTML = " varable is currently: " + result;
        //         document.body.appendChild(newAverage);            
        // };

        // getAverage(swellPeriodNow);




        /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        var currentdate = new Date();
        console.log(currentdate);

        const currentHour = currentdate.getHours();
        console.log(currentHour);


        const Bantham = { lat: 50.279121, lng: -3.884438 };
        console.log(Bantham);

        const Gwenver = { lat: 50.089757, lng: -5.691629 };
        console.log(Gwenver);


        beach = Object.values(Bantham);
        console.log(beach);


        const lat = beach[0];
        console.log(lat);

        const lng = beach[1];
        console.log(lng);

        function getAverage(obj) {

            let values = Object.values(obj);
            let sum = 0;

            for (let i = 0; i < values.length; i++) {
                sum = sum + values[i]
            };
            const result = sum / values.length;

            newAverage = document.createElement("p");
            newAverage.innerHTML = " varable is currently: " + result;
            document.body.appendChild(newAverage);
        };





        var params = 'windSpeed,windDirection,swellHeight,waveDirection,swellPeriod';

        async function getResponse() {

            const response = await fetch(`https://api.stormglass.io/v2/weather/point?lat=${lat}&lng=${lng}&params=${params}`, {
                headers: {
                    'Authorization': 'd8910aa4-f855-11ec-956e-0242ac130002-d8910b12-f855-11ec-956e-0242ac130002'
                }
            })

                // const data = await response.json();
                // console.log(data);

                .then((response) => response.json()).then((data) => {

                    let currentData = data.hours[currentHour];
                    console.log(currentData);

                    let swell = currentData.swellHeight;
                    console.log(swell);
                    getAverage(swell);

                    let period = currentData.swellPeriod;
                    console.log(period);
                    getAverage(period);

                    let waveDir = currentData.waveDirection;
                    console.log(waveDir);
                    getAverage(waveDir);

                    let windDir = currentData.windDirection;
                    console.log(windDir);
                    getAverage(windDir);

                    let windVel = currentData.windSpeed;
                    console.log(windVel);
                    getAverage(windVel);

                });

        };

        getResponse();





        ///////////////////////////////////////////////////////////////////////////////////////////////////////////
                // MAIN CODE BUT NOT RUNNING STACK CORRECTLY



        // async function getBeachData() {

        //     const response = await fetch(`https://api.stormglass.io/v2/weather/point?lat=${lat}&lng=${lng}&params=${params}`, {
        //         headers: {
        //             'Authorization': 'd8910aa4-f855-11ec-956e-0242ac130002-d8910b12-f855-11ec-956e-0242ac130002'
        //         }

        //     }).then((response) => response.json()).then((jsonData) => {

        //         console.log(jsonData);

        //         let currentData = jsonData.hours[currentHour];
        //         console.log(currentData);

        //         let swell = currentData.swellHeight;
        //             console.log(swell);
        //         let period = currentData.swellPeriod;
        //             console.log(period);
        //         let waveDir = currentData.waveDirection;
        //             console.log(waveDir);
        //         let windDir = currentData.windDirection;
        //             console.log(windDir);
        //         let windVel = currentData.windSpeed;
        //             console.log(windVel);

        //         function swellAverage() {

        //             let value = Object.values(swell);
        //             console.log(value);

        //             let sum = 0;

        //             for (const key in value) {
        //                 sum += value[key]
        //             };

        //             console.log(sum);

        //             let result = sum / value.length;

        //             console.log(result);

        //             let height = document.createElement("p");
        //             height.innerHTML = "Swell height is currently:" + "  " + result + "m";
        //             document.body.appendChild(height);

        //             return (result);

        //         };

        //         swellAverage();

        //         function periodAverage() {

        //             let value = Object.values(period);
        //             console.log(value);

        //             let sum = 0;

        //             for (const key in value) {
        //                 sum += value[key]
        //             };

        //             console.log(sum);

        //             let result = sum / value.length;

        //             console.log(result);

        //             const period = document.createElement("p");
        //             period.innerHTML = "Swell period is currently:" + "  " + result + "s";
        //             document.body.appendChild(period);

        //             return (result);

        //         }

        //         periodAverage();

        //         function waveDirAverage() {

        //             let value = Object.values(waveDir);
        //             console.log(value);

        //             let sum = 0;

        //             for (const key in value) {
        //                 sum += value[key]
        //             };

        //             console.log(sum);

        //             let result = sum / value.length;

        //             console.log(result);

        //             const wavDirection = document.createElement("p");
        //             wavDirection.innerHTML = "wave direction is currently:" + "  " + result + "deg";
        //             document.body.appendChild(wavDirection);

        //             return (result);

        //         }

        //         waveDirAverage();

        //         function windDirAverage() {

        //             let value = Object.values(windDir);
        //             console.log(value);

        //             let sum = 0;

        //             for (const key in value) {
        //                 sum += value[key]
        //             };

        //             console.log(sum);

        //             let result = sum / value.length;

        //             console.log(result);

        //             const winDirection = document.createElement("p");
        //             winDirection.innerHTML = "Wind directions is currently:" + "  " + result + "deg";
        //             document.body.appendChild(winDirection);

        //             return (result)

        //         }

        //         windDirAverage();

        //         function windVelAverage() {

        //             let value = Object.values(windVel);
        //             console.log(value);

        //             let sum = 0;

        //             for (const key in value) {
        //                 sum += value[key]
        //             };

        //             console.log(sum);

        //             let result = sum / value.length;

        //             console.log(result);

        //             const winVel = document.createElement("p");
        //             winVel.innerHTML = "Wind velocity is currently:" + "  " + result + "m/s";
        //             document.body.appendChild(winVel);

        //             return (result);

        //         }

        //         windVelAverage();



        //     })

        // };


        // getBeachData();




    </script>

</body>

</html>